<!doctype html>
<html>
	<head>
		<title>Descartes</title>
		<link rel="stylesheet" href="highlight/styles/rainbow.css">
		<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,200,300,600,700,900' rel='stylesheet' type='text/css'>
		<link href='https://fonts.googleapis.com/css?family=Anonymous+Pro:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
		<script type="text/javascript" src="dist/descartes.js"></script>
	</head>
	<body>
		<nav>
			<div class="row">
				<div class="col2"><a href="#overview">Overview</a></div>
				<div class="col2"><a href="#features">Features</a></div>
				<div class="col2"><a href="#about">About</a></div>
				<div class="col2"><a href="#examples">Examples</a></div>
				<div class="col2"><a href="http://github.com/jonhmchan/descartes">GitHub</a></div>
				<div class="col2"><a href="#donate">Donate</a></div>
			</div>
		</nav>
		<header>
			<div class="content">
				<h1>Descartes</h1>
				<h2>Styling for Programmers</h2>
				<p>An experimental library for writing CSS in JavaScript</p>
				<a class="button" href="/dist/descartes.min.js">Download Beta</a>
				<a class="button" href="#features">Read documentation</a>
			</div>
		</header>
		<section class="offset">
			<a name="overview" />
			<div class="table-row">
				<div class="table-col5">
					<h3>Smart Stylesheets</h3>
					<h4>Powered by JavaScript</h4>
					<p>I've taken some ideas from CSS preprocessors like Less and Sass and wondered what it would be like to write CSS as JSON. You can get all the advantages of a typical preprocessor and some: complex programming to set styles, access to the DOM, and even basic event listeners!</p>
					<p><a class="button">Click anywhere to see it in action</a></p>
				</div>
				<div class="table-col7">
					<strong>index.html</strong>
<pre><code class="javascript">&lt;!doctype html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;script type="text/javascript" src="descartes.js"&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;Hello World!&lt;/h1&gt;
  &lt;script type="text/javascript" src="styles.js"&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
			<strong>styles.js</strong>
<pre><code class="javascript">var reset = {"margin": 0,
  "padding": 0,
  "box-sizing": "border-box"
};
var rand_angle = function() {
  return Math.round(Math.random() * (180) - 90);
};
var rand_rgba = function() {
  return "rgba("+[255,255,255].map(function(x) {
    return Math.round(Math.random() * x);
  }).join()+", 1)"
};

new Descartes({ // Just put descartes.js in the &lt;head&gt; tag
  "html": {
    "_mixins": reset, // Reuse CSS rules with mixins
    "body": { // Nest selectors just like in Sass and Less
      "_mixins": reset,
      "_listeners": [
        [window, "click"],
        [window, "touchstart"]], // Bind events...
      "background": function() {
        return 'linear-gradient('
          + rand_angle().toString() + 'deg,'
          + rand_rgba() + ','
          + rand_rgba() + ')'
      } // ...to set dynamic property values when they fire!
    }
  }
})
</code></pre>
				</div>
			</div>
		</section>
		<section class="plain">
			<div class="row">
				<div class="col2">&nbsp;</div>
				<div class="col8">
					<h3>Small + Fast</h3>
					<p>Descartes is just under <strong>30KB</strong> when minified. It's written entirely in JavaScript with its few dependencies baked in. It's also fast: <a href="dist/styles.js" target="_blank">the styles for this page</a> took just <strong><span id="time"></span> milliseconds</strong> to render on this page load.</p>
				</div>
				<div class="col2">&nbsp;</div>
			</div>
		</section>
		<section class="offset">
			<div class="table-row">
				<div class="table-col7">
				<strong>Descartes + JavaScript</strong>
<pre><code class="javascript">new Descartes({
  "html" {
    "margin": 0,
    "padding": 0,
    "body" {
      "margin": 0,
      "padding": 0,
      "section" {
        "max-width": "800px"
      }
    }
  }
})</code></pre>
				<strong>Sass or Less Equivalent</strong>
<pre><code class="sass">html {
  margin: 0;
  padding: 0;
  body {
  margin: 0;
  padding: 0;
    section {
      max-width: 800px;
    }
  }
}</code></pre>
				<strong>Plain CSS Equivalent</strong>
<pre><code class="css">html {
  margin: 0;
  padding: 0;
}
html body {
  margin: 0;
  padding: 0;
}
html body section {
  max-width: 800px;
}</code></pre>
			</div>
			<div class="table-col5">
					<h3>A Familiar Style</h3>
					<h4>JavaScript like Less and Sass</h4>
					<p>It turns out writing CSS as JSON isn't all that different from Less and Sass. I've written Descartes to act just like other CSS processors with some extra features. You get nesting, mixins, and variables just like the others!</p>
					<p><a class="button" href="/guide">Learn the basics</a></p>
			</div>
			</div>
		</section>
		<section class="offset features">
			<a name="features" />
			<div class="row">
				<div class="col12">
					<h3>Features</h3>
					<p>Descartes has most of the features you're familiar with from Less and Sass, but adds the power of JavaScript to your styles. Get an overview of what the library has to offer.
				</div>
			</div>
			<div class="table-row">
				<div class="table-col5">
					<div>
					<h4>Style Tree</h4>
					<p>You write all of your styles into a single JavaScript object literal that you pass to Descartes. It feels just like writing in other CSS preprocessors like Less or Sass, but you get all the benefits of constructing your style tree with JavaScript. That means real variables, functions, and operations.</p>
					</div>
				</div>
				<div class="table-col7">
<pre><code class="javascript">var standardSize = 16;
var tree = { // Just a JavaScript object literal
  "html": {
    "margin": 0, // Implicit conversion to px
    "padding": 0,
    "height": "100%",
    "body": { // Nested inside of `html`
      "color": "#333",
      "font-family": "Helvetica",
      "font-size": standardSize, // Use variables
      "h1": { // Nested inside of `html body`
        "font-size": standardSize * 1.2, // Operations
        "font-weight": 300
      }
    }
  }
};
var d = new Descartes(tree); // Renders style tree
</code></pre>
				</div>
			</div>
			<div class="table-row">
				<div class="table-col5">
					<div>
					<h4>Mixins</h4>
					<p>Sometimes you'll want to reuse some of the same rules over and over again and variables won't cut it. Descartes supports mixins: reusable sets of declarations that you can insert into your style tree. Just define some preset rules and pass them into the mixins property for that selector. They apply in order, and won't overwrite your explicit styles.</p>
					</div>
				</div>
				<div class="table-col7">
<pre><code class="javascript">var _reset = { // Mixin objects usually prefixed with _
  "margin": 0,
  "padding": 0
};
var _font = function(n) { // Mixin function that returns an object
  var mixin = {
    "font-size": 16 * Math.pow(1.4, n), // Modular scale
    "font-family": "Helvetica",
    "font-weight": 600
  };
  return mixin;
}
var tree = {
  "html": {
    "_mixins": _reset, // Gets margin and padding!
    "background": "#fff",
    "h1": {
      "_mixins": _font(6) // You can pass function values
    },
    "h2": {
      "_mixins": _font(5),
      "font-weight": 300 // Explicit rules get priority
    },
    "p": {
      "_mixins": [_font(1), _reset] // Applied in order
    }
  }
};
var d = new Descartes(tree);
</code></pre>
				</div>
			</div>
			<div class="table-row">
				<div class="table-col5">
					<div>
					<h4>Dynamic Values</h4>
					<p>Because you're writing styles in JavaScript, you can pass functions to compute properties in Descartes. Each node is passed as the first argument to any functions you define, so you can create powerful declarations that weren't possible before. You even get access to the DOM, so you can generate values based on other element properties.</p>
					</div>
				</div>
				<div class="table-col7">
<pre><code class="javascript">// Vertical alignment using margins
var tree = {
  .
  .
  .
  ".verticalAlign": {
    "margin-top": function(_) {
      // _ is the individual .verticalAlign element
      var parentHeight = _.parentNode.height; // Parent height (!)
      var height = _.height; // Get current node's height
      return (parentHeight + height)/2; // Compute margin in px
    }
  }
  .
  .
  .
};
var d = new Descartes(tree);
</code></pre>
				</div>
			</div>
			<div class="table-row">
				<div class="table-col5">
					<div>
					<h4>Event Listeners</h4>
					<p>Combining event listeners with dynamic values unlocks a whole new level of control over your styles. You can bind any event to recompute the rules for that selector. This makes responsive design, parallax, and basic interactivity a breeze.</p>
					</div>
				</div>
				<div class="table-col7">
<pre><code class="javascript">// Visible nav bar based on scroll direction like on this page

var lastScroll = $(window).scrollTop() // Use jQuery if you want!
var tree = {
  "nav": {
    "_listeners": [[window, 'scroll']], // Listen to scroll event
    "overflow": "hidden",
    "position": "fixed",
    "width": "100%",
    "transition": "all 0.5s ease", // Nice animations
    "height": function(_) { // Dynamic value
      var scroll = $(window).scrollTop();
      if (scroll > lastScroll) { // Detect scroll direction
        lastScroll = scroll;
        return 0; // Hide the nav
      }
      lastScroll = scroll;
      return 50; // Show the nav
    }
  }
};
var d = new Descartes(tree);
</code></pre>
				</div>
			</div>
		</section>
		<section class="offset">
			<div class="table-row">
				<div class="table-col5">
					<div>
					<h4>12 Column Grid</h4>
					<p>Writing a standard grid in Descartes becomes easy with Descartes. Because of dynamic values, access to the DOM, and listeners, you can create a fully responsive grid system in just a few lines of code.</p>
					</div>
				</div>
				<div class="table-col7">
<pre><code class="javascript">// Example 12 column grid system
/*
&lt;div class="row"&gt;
  &lt;div data-cols="3"&gt;3 columns&lt;/div&gt;
  &lt;div data-cols="9"&gt;9 columns&lt;/div&gt;
&lt;/div&gt;
*/
var columns = 12; // Number of columns in the grid
var gutter = 1.6 // Gutter as percentage of row
var d = new Descartes({
  ".row": { // Container for columns
    "overflow": "auto",
    "&::after": { // Implement a clearfix
      "content": "",
      "display": "table",
      "clear": "both"
    },
    "> [data-cols]": { // 'data-cols' is # of columns
      "box-sizing": "border-box",
      "float": "left",
      "width": function(_) { // _ is the individual element
        var n = parseInt(_.getAttribute("data-cols"))
      	var full = 100-(columns-1)*gutter;
        var gutterFill = (n-1)*gutter;
        var width = (n*(full/columns))+gutterFill;
        return width.toString() + '%';
      },
      "margin-right": function(_) {
        if (_.nextElementSibling === null) {
          return 0; // Remove gutter if last column element
        }
        return (gutter.toString() + "%");
      }
    }
  }
})
</code></pre>
				</div>
			</div>
		</section>
	</body>
	<script type="text/javascript" src="jquery-2.2.0.min.js"></script>
	<script type="text/javascript" src="dist/plato.js"></script>
	<script type="text/javascript" src="dist/styles.js"></script>

	<script type="text/javascript" src="highlight/highlight.pack.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>

</html>